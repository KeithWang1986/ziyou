!function(t,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e=n();for(var o in e)("object"==typeof exports?exports:t)[o]=e[o]}}(window,function(){return function(t){var n={};function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n);var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}();function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var i=new(function(){function t(){r(this,t),this.controllers={},this.mappings={},this.dataHandler=null}return o(t,[{key:"OnDataHandler",value:function(t){this.dataHandler=t}},{key:"AddController",value:function(t,n){var e=this.controllers[t];e?e.push(n):this.controllers[t]=[n]}},{key:"RemoveController",value:function(t,n){var e=this.controllers[t];e&&(this.controllers[t]=e.filter(function(t){return t.__ziyou__id!=n.__ziyou__id}))}},{key:"AddRequestMapping",value:function(t,n,e,o,i){var u=new function t(n,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];r(this,t),this.controllerName=n,this.action=e,this.keys=o,this.descriptor=i,this.dataHandle=u}(t,n,e,o,i),l=this.mappings[t];l||(this.mappings[t]={},l=this.mappings[t]),l[n]?console.error("重复插入action"):l[n]=u}},{key:"GetRequestMapping",value:function(t,n){var e=this.mappings[t];if(e){var o=e[n];if(o)return o}}},{key:"Dispatch",value:function(t,n,e){var o=this.mappings[t];if(o){var r=o[n];if(r){var i=this.controllers[t];if(i)for(var u=0;u<i.length;u++){var l=i[u];this._Dispatch(l,r,e)}}}}},{key:"_Dispatch",value:function(t,n,e){var o=this,r={args:{},result:{}};e&&(r.args=Object.assign(e));var i=!0;if(n.keys.length>0)for(var u=0;u<n.keys.length;u++){var l=n.keys[u],a=e[l];if(t[l]!=a){i=!1;break}}i&&(n.dataHandle&&this.dataHandler?new Promise(function(t,e){r.resolve=t,r.reject=e,o.dataHandler(n.controllerName,n.action,r)}).then(function(e){r.result=e,delete r.resolve,delete r.reject,n.descriptor.value.call(t,r)}).catch(function(t){console.error(t)}):n.descriptor.value.call(t,r))}}]),t}());window.router=i;var u=1;function l(){return u++}function a(t,n,e){if(n){for(var o={},r=i.GetRequestMapping(t,n),u=r.keys,l=0;l<u.length;l++){var a=u[l];o[a]=e[a]}i._Dispatch(e,r,o)}}function c(t,n){return function(e){e.prototype.componentWillMount?(e.prototype.__ziyou__componentWillMount=e.prototype.componentWillMount,e.prototype.componentWillMount=function(){this.__ziyou__componentWillMount(),this.__ziyou__id=l(),i.AddController(t,this),a(t,n,this)}):e.prototype.componentWillMount=function(){this.__ziyou__id=l(),i.AddController(t,this),a(t,n,this)},e.prototype.componentWillUnmount?(e.prototype.__ziyou__componentWillUnmount=e.prototype.componentWillUnmount,e.prototype.componentWillUnmount=function(){this.__ziyou__componentWillUnmount(),i.RemoveController(t,this)}):e.prototype.componentWillUnmount=function(){i.RemoveController(t,this)}}}function s(t,n,e,o){return function(r,u,l){return i.AddRequestMapping(t,n,e,l,o),l}}e.d(n,"Controller",function(){return c}),e.d(n,"RequestMapping",function(){return s}),e.d(n,"router",function(){return i})}])});