!function(t,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e=n();for(var o in e)("object"==typeof exports?exports:t)[o]=e[o]}}(window,function(){return function(t){var n={};function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n);var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}();function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var i=new(function(){function t(){r(this,t),this.controllers={},this.mappings={},this.dataHandler=null}return o(t,[{key:"OnDataHandler",value:function(t){this.dataHandler=t}},{key:"AddController",value:function(t,n){var e=this.controllers[t];e?e.push(n):this.controllers[t]=[n]}},{key:"RemoveController",value:function(t,n){var e=this.controllers[t];e&&(this.controllers[t]=e.filter(function(t){return t.__ziyou__id!=n.__ziyou__id}))}},{key:"AddRequestMapping",value:function(t,n,e,o,i){var u=new function t(n,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];r(this,t),this.controllerName=n,this.action=e,this.keys=o,this.descriptor=i,this.dataHandle=u}(t,n,e,o,i),l=this.mappings[t];l||(this.mappings[t]={},l=this.mappings[t]),l[n]?console.error("重复插入action"):l[n]=u}},{key:"GetRequestMappingKeys",value:function(t,n){var e=this.mappings[t];if(e){var o=e[n];if(o)return o.keys}}},{key:"Dispatch",value:function(t,n,e){var o=this,r=this.mappings[t];if(r){var i=r[n];if(i){var u=this.controllers[t];if(u)for(var l=function(r){var l=u[r],a={args:{},result:{}};e&&(a.args=Object.assign(e));var c=!0;if(i.keys.length>0)for(var s=0;s<i.keys.length;s++){var p=i.keys[s],f=e[p];if(l[p]!=f){c=!1;break}}c&&(i.dataHandle&&o.dataHandler?new Promise(function(e,r){a.resolve=e,a.reject=r,o.dataHandler(t,n,a)}).then(function(t){a.result=t,delete a.resolve,delete a.reject,i.descriptor.value.call(l,a)}).catch(function(t){console.error(t)}):i.descriptor.value.call(l,a))},a=0;a<u.length;a++)l(a)}}}}]),t}());window.router=i;var u=1;function l(){return u++}function a(t,n,e){if(n){for(var o={},r=i.GetRequestMappingKeys(t,n),u=0;u<r.length;u++){var l=r[u];o[l]=e[l]}i.Dispatch(t,n,o)}}function c(t,n){return function(e){e.prototype.componentWillMount?(e.prototype.__ziyou__componentWillMount=e.prototype.componentWillMount,e.prototype.componentWillMount=function(){this.__ziyou__componentWillMount(),this.__ziyou__id=l(),i.AddController(t,this),a(t,n,this)}):e.prototype.componentWillMount=function(){this.__ziyou__id=l(),i.AddController(t,this),a(t,n,this)},e.prototype.componentWillUnmount?(e.prototype.__ziyou__componentWillUnmount=e.prototype.componentWillUnmount,e.prototype.componentWillUnmount=function(){this.__ziyou__componentWillUnmount(),i.RemoveController(t,this)}):e.prototype.componentWillUnmount=function(){i.RemoveController(t,this)}}}function s(t,n,e,o){return function(r,u,l){return i.AddRequestMapping(t,n,e,l,o),l}}e.d(n,"Controller",function(){return c}),e.d(n,"RequestMapping",function(){return s}),e.d(n,"router",function(){return i})}])});